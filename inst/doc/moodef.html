<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2024-02-09" />

<title>moodef: Defining Moodle Elements from R</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">moodef: Defining Moodle Elements from
R</h1>
<h4 class="date">2024-02-09</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p><a href="https://moodle.org/"><em>Moodle</em></a> is a widespread
open source learning platform. It is the official teaching support
platform of the University of Granada (Spain), where we develop this
package.</p>
<p>The goal of the <code>moodef</code> package is to harness the power
of R to make defining <em>Moodle</em> elements easier. In particular,
this first version is focused on the definition of questions for
quizzes.</p>
<p>The process is as follows: we define the questions in R, from the
definition, we generate an xml file that we can import directly into
<em>Moodle</em>.</p>
<p>What does this package provide? On the one hand, we have simplified
the process of manually defining the questions, considering only the
essential parameters for each type. On the other hand, the package
offers an infrastructure that allows the automatic or semi-automatic
generation of questions from R: to define a question we simply need to
include a row in a data frame, a csv file or an <em>Excel</em> file.</p>
<p>The rest of this document is structured as follows: First, the
general process of defining questions is presented. Next, we show the
types of questions considered and how to define them. Finally, the
document ends with conclusions.</p>
</div>
<div id="question-definition-process" class="section level1">
<h1>Question definition process</h1>
<p>One of the main objectives considered in the package design has been
to simplify the definition of the questions. To do this, we have
considered for each question the default values that we use most
frequently and we only have to define the specific components of the
question:</p>
<ul>
<li>statement,</li>
<li>an optional image and</li>
<li>answers.</li>
</ul>
<p>We do not even have to define the type, only, in some cases, indicate
some additional detail, such as the orientation of the presentation of
the answers. The type is deduced from the definition.</p>
<p>Questions are defined within the framework of a <em>category</em>
(<em>Moodle</em> concept). In its definition we have included the
general configuration parameters for all questions.</p>
<p>Therefore, the definition process is as follows:</p>
<ol style="list-style-type: decimal">
<li><p>Define the category.</p></li>
<li><p>Define questions.</p></li>
<li><p>Generate the xml file with the result.</p></li>
<li><p>Import the xml file from <em>Moodle</em>.</p></li>
</ol>
<p>As a result, the questions are added to the question bank within the
category and can be used directly in the definition of quizzes. If we
need to configure a specific aspect of a question, it can be done
there.</p>
<p>In this section we are going to show the first three points of this
process.</p>
<div id="define-the-category" class="section level2">
<h2>Define the category</h2>
<p>To define a category we use the function
<code>question_category()</code> and we have to indicate its name: it
creates an object of class <code>question_category</code>.</p>
<p>Below is a call to the function with the values of the parameters
that we usually define.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(moodef)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>qc <span class="ot">&lt;-</span> <span class="fu">question_category</span>(<span class="at">category =</span> <span class="st">&#39;Initial test&#39;</span>,</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>                        <span class="at">copyright =</span> <span class="st">&#39;Copyright © 2024 Universidad de Granada&#39;</span>,</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>                        <span class="at">license =</span> <span class="st">&#39;License Creative Commons Attribution-ShareAlike 4.0&#39;</span>,</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>                        <span class="at">adapt_images =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>In addition to the category name in the <code>category</code>
parameter, we define the <code>copyright</code> and <code>license</code>
parameters that will appear between comments in the xml file associated
with each question, as can be seen below.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">&quot;1.0&quot;</span><span class="ot"> encoding=</span><span class="st">&quot;UTF-8&quot;</span><span class="fu">?&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>&lt;<span class="kw">quiz</span>&gt;</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  &lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">&quot;category&quot;</span>&gt;</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    &lt;<span class="kw">category</span>&gt; &lt;<span class="kw">text</span>&gt;$course$/top/Initial test&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">category</span>&gt;</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    &lt;<span class="kw">info</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">info</span>&gt;</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    &lt;<span class="kw">idnumber</span>&gt;&lt;/<span class="kw">idnumber</span>&gt;</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  &lt;/<span class="kw">question</span>&gt;</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>&lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">&quot;...&quot;</span>&gt;</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>...</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>&lt;<span class="kw">questiontext</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt;</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>  &lt;<span class="kw">text</span>&gt;<span class="bn">&lt;![CDATA[</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>     &lt;!-- Copyright © 2024 Universidad de Granada --&gt;</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>     &lt;!-- License Creative Commons Attribution-ShareAlike 4.0 --&gt;</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>     ... <span class="bn">]]&gt;</span>&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>...</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>&lt;/<span class="kw">questiontext</span>&gt;</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>...</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>&lt;/<span class="kw">question</span>&gt;</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>&lt;/<span class="kw">quiz</span>&gt;</span></code></pre></div>
<p>Below is the function call that is being made including the default
values of the rest of the parameters.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> <span class="fu">question_category</span>(<span class="at">category =</span> <span class="st">&#39;Initial test&#39;</span>,</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>                        <span class="at">first_question_number =</span> <span class="dv">1</span>,</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>                        <span class="at">copyright =</span> <span class="st">&#39;Copyright © 2024 Universidad de Granada&#39;</span>,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>                        <span class="at">license =</span> <span class="st">&#39;License Creative Commons Attribution-ShareAlike 4.0&#39;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>                        <span class="at">correct_feedback =</span> <span class="st">&#39;Correct.&#39;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>                        <span class="at">partially_correct_feedback =</span> <span class="st">&#39;Partially correct.&#39;</span>,</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>                        <span class="at">incorrect_feedback =</span> <span class="st">&#39;Incorrect.&#39;</span>,</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>                        <span class="at">adapt_images =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>                        <span class="at">width =</span> <span class="dv">800</span>,</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>                        <span class="at">height =</span> <span class="dv">600</span>)</span></code></pre></div>
<p>We are going to discuss the use of each parameter.</p>
<p>Questions have a name, which is displayed as a summary in the
<em>Moodle</em> question bank. We compose the name from the number of
the question, the type of question that we have deduced and the
beginning of its statement. For example, below is a generated question
name.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">&quot;1.0&quot;</span><span class="ot"> encoding=</span><span class="st">&quot;UTF-8&quot;</span><span class="fu">?&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>&lt;<span class="kw">quiz</span>&gt;</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>...  </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>&lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">&quot;multichoice&quot;</span>&gt;</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>&lt;<span class="kw">name</span>&gt; &lt;<span class="kw">text</span>&gt;q_001_multichoice_what_are_the_basic_arithmetic_operations&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">name</span>&gt;</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>...</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>&lt;/<span class="kw">question</span>&gt;</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>&lt;/<span class="kw">quiz</span>&gt;</span></code></pre></div>
<p>Using the parameter <code>first_question_number</code>, the number
that will be assigned to the first question is defined, with a
three-digit format. This number will increase for each question.</p>
<p>For each question we can indicate feedback text for cases in which
the answer is correct, partially correct or incorrect: The corresponding
values are provided by the <code>correct_feedback</code>,
<code>partially_correct_feedback</code> and
<code>incorrect_feedback</code> parameters.</p>
<p>Finally, each question stem can include an image. Sometimes the
images we use have very different sizes and require a prior
transformation to homogenize their presentation. This transformation can
be carried out automatically by indicating it using the parameter
<code>adapt_images</code> (default is <code>FALSE</code>). Using the
parameters <code>width</code> and <code>height</code> we indicate the
size of the resulting image. It is advisable to test this functionality
and adjust the size accordingly by viewing the result when defining a
questionnaire in <em>Moodle</em>. <strong>The original images are not
modified</strong>, only those that are embedded in the xml file.</p>
</div>
<div id="define-questions" class="section level2">
<h2>Define questions</h2>
<p>Once we have a <code>question_category</code> object created, we can
define questions that are added to it.</p>
<p>We can define the questions one by one using a definition function or
in bulk using a data frame, a csv file or an <em>Excel</em> file. Below
we show the possibilities offered.</p>
<div id="definition-function" class="section level3">
<h3>Definition function</h3>
<p>The minimum we have to define about a question is its statement.
Here’s how to define a question using the <code>define_question()</code>
function.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;Describe the addition operation.&#39;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  )</span></code></pre></div>
<p>Below is the definition of a question with all possible parameters,
which we explain below.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&#39;x&#39;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;Place the name of the operations as they appear in the figure.&#39;</span>,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="at">image =</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;ops.png&quot;</span>, <span class="at">package =</span> <span class="st">&quot;moodef&quot;</span>),</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="at">image_alt =</span> <span class="st">&#39;Operations&#39;</span>,</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;Addition&#39;</span>,</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="st">&#39;Multiplication&#39;</span>,</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    <span class="at">a_2 =</span> <span class="st">&#39;Division&#39;</span>,</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    <span class="at">a_3 =</span> <span class="st">&#39;Subtraction&#39;</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>  )</span></code></pre></div>
<p>The type of question is deduced from the statement and the answers.
The <code>type</code> parameter is used to distinguish between two types
of questions and also to indicate the presentation of the answers. It
can have three values: empty, <code>h</code> or any other value
different from those two. In the above example it is <code>x</code>,
that is, the third case: As we will see in the next section, it
indicates that it is not a <code>multichoice</code> question and that
the values are not displayed horizontally (<code>h</code> value).</p>
<p>The question statement is defined by the parameter
<code>question</code>.</p>
<p>An image can be shown after the statement. Using the parameter
<code>image</code> we indicate the file that contains it: In the example
we obtain the name of a file included in this package. Each image must
have a description that is indicated by the <code>image_alt</code>
parameter.</p>
<p>Finally we define the answers to the question. Using the parameter
<code>answer</code> we indicate the first one. If necessary, we can
indicate the rest in a variable way with the parameter names we want (or
without names, if we use all the defined parameters), as many as we need
to include.</p>
</div>
<div id="definition-using-a-csv-file-or-an-excel-file" class="section level3">
<h3>Definition using a csv file or an <em>Excel</em> file</h3>
<p>We can create an empty csv file but with the necessary columns using
the <code>create_question_csv()</code> function. In addition to the file
name, we can also indicate the separator to use (<code>,</code> or
<code>;</code>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="fu">create_question_csv</span>(<span class="at">file =</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&#39;.csv&#39;</span>))</span></code></pre></div>
<p>The content of the file is shown below.</p>
<pre class="csv"><code>&quot;type&quot;,&quot;question&quot;,&quot;image&quot;,&quot;image_alt&quot;,&quot;answer&quot;,&quot;a_1&quot;,&quot;a_2&quot;,&quot;a_3&quot;</code></pre>
<p>We can add as many additional columns as we consider necessary. From
that file, we can include rows using a text editor, R or some tool to
edit csv files in spreadsheet format.</p>
<p>Below is the content of a csv file included in this package.</p>
<pre class="csv"><code>&quot;type&quot;,&quot;question&quot;,&quot;image&quot;,&quot;image_alt&quot;,&quot;answer&quot;,&quot;a_1&quot;,&quot;a_2&quot;,&quot;a_3&quot;
,&quot;What are the basic arithmetic operations?&quot;,,,&quot;Addition, subtraction, multiplication and division.&quot;,&quot;Addition and subtraction.&quot;,&quot;Addition, subtraction, multiplication, division and square root.&quot;,
,&quot;Match each operation with its symbol.&quot;,,,&quot;Addition&lt;|&gt;+&quot;,&quot;Subtraction&lt;|&gt;-&quot;,&quot;Multiplication&lt;|&gt;*&quot;,
,&quot;The square root is a basic arithmetic operation.&quot;,,,&quot;False&quot;,,,
,&quot;What basic operation does it have as a &quot;&quot;+&quot;&quot; symbol?&quot;,,,&quot;Addition&quot;,,,
,&quot;The symbol for addition is [[1]], the symbol for subtraction is [[2]].&quot;,,,&quot;+&quot;,&quot;-&quot;,,
&quot;x&quot;,&quot;The symbol for addition is [[1]], the symbol for subtraction is [[2]].&quot;,,,&quot;+&quot;,&quot;-&quot;,,
&quot;h&quot;,&quot;Sort the result from smallest to largest.&quot;,,,&quot;6/2&quot;,&quot;6-2&quot;,&quot;6+2&quot;,&quot;6*2&quot;
&quot;x&quot;,&quot;Sort the result from smallest to largest.&quot;,,,&quot;6/2&quot;,&quot;6-2&quot;,&quot;6+2&quot;,&quot;6*2&quot;
,&quot;What is the result of SQRT(4)?&quot;,,,&quot;2&quot;,&quot;-2&quot;,,
,&quot;What is the result of 4/3?&quot;,,,&quot;1.33&lt;|&gt;0.03&quot;,,,
,&quot;Describe the addition operation.&quot;,,,,,,</code></pre>
<p>Once available, we can generate all the questions using the
<code>define_questions_from_csv()</code> function, as shown below.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;questions.csv&quot;</span>, <span class="at">package =</span> <span class="st">&quot;moodef&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">define_questions_from_csv</span>(file)</span></code></pre></div>
<p>There are types of questions in which two string values must be
indicated for each answer. The criterion we have adopted to include two
values in a cell is to use a separator and define them in a single
string, the separator is <code>&lt;|&gt;</code>: It can be seen in the
definition of some of the previous questions, for example,
<code>Addition&lt;|&gt;+</code> or <code>1.33&lt;|&gt;0.03</code>.</p>
<p>In this example, questions with images have not been included due to
the difficulty of referencing the image files in the package from the
csv file, but they can be included without any problem.</p>
<p>For <em>Excel</em> files the definition is carried out in the same
way. The corresponding functions are:
<code>create_question_excel()</code> and
<code>define_questions_from_excel()</code>.</p>
</div>
<div id="definition-using-a-data-frame" class="section level3">
<h3>Definition using a data frame</h3>
<p>We can also massively define the questions using a data frame. We can
create an empty one using the <code>create_question_data_frame()</code>
function or read one from a csv file using the
<code>read_question_csv()</code> function. In this case we are going to
read one that contains images in the statements.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;questions_image.csv&quot;</span>, <span class="at">package =</span> <span class="st">&quot;moodef&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_question_csv</span>(<span class="at">file =</span> file)</span></code></pre></div>
<p>The content of the data frame is shown below.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(df, <span class="at">split.table =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<table>
<colgroup>
<col width="5%" />
<col width="25%" />
<col width="15%" />
<col width="10%" />
<col width="8%" />
<col width="13%" />
<col width="8%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">type</th>
<th align="center">question</th>
<th align="center">image</th>
<th align="center">image_alt</th>
<th align="center">answer</th>
<th align="center">a_1</th>
<th align="center">a_2</th>
<th align="center">a_3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"></td>
<td align="center">What basic operation has the symbol shown in the
figure as its symbol?</td>
<td align="center">xxxxx/divide.png</td>
<td align="center">Operation</td>
<td align="center">Division</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">x</td>
<td align="center">Place the name of the operations as they appear in
the figure.</td>
<td align="center">xxxxx/ops.png</td>
<td align="center">Operations</td>
<td align="center">Addition</td>
<td align="center">Multiplication</td>
<td align="center">Division</td>
<td align="center">Subtraction</td>
</tr>
</tbody>
</table>
<p>In this case we are going to update the figure data with the files
included in the package (in a local example, this is not necessary).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>df[<span class="dv">1</span>, <span class="st">&#39;image&#39;</span>] <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;divide.png&quot;</span>, <span class="at">package =</span> <span class="st">&quot;moodef&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>df[<span class="dv">2</span>, <span class="st">&#39;image&#39;</span>] <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;ops.png&quot;</span>, <span class="at">package =</span> <span class="st">&quot;moodef&quot;</span>)</span></code></pre></div>
<p>From R we can add new rows or modify existing ones. As we have
explained in the previous section, there are questions in which we need
to define two values in a cell using a separator:
<code>&lt;|&gt;</code>. To facilitate the definition of these cells, we
have defined the function <code>vector_to_string()</code> that, from a
vector, generates a string including that separator, as shown in the
following example.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">vector_to_string</span>(<span class="fu">c</span>(<span class="st">&#39;Addition&#39;</span>, <span class="st">&#39;+&#39;</span>))</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>s</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Addition&lt;|&gt;+&quot;</span></span></code></pre></div>
<p>Once the definition of the questions in the data frame is finished,
we can add it to the <code>question_category</code> object using the
<code>define_questions_from_data_frame()</code> function, as it’s shown
in the following.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="fu">define_questions_from_data_frame</span>(df)</span></code></pre></div>
</div>
</div>
<div id="generate-the-xml-file" class="section level2">
<h2>Generate the xml file</h2>
<p>Once the questions we need have been defined, the next step is to
generate the xml file. We use the <code>generate_xml_file()</code>
function, to which we have to indicate a file name.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&#39;.xml&#39;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="fu">generate_xml_file</span>(file)</span></code></pre></div>
<p>The generated file is the one that we can import from <em>Moodle</em>
in the <em>Question Bank</em> section.</p>
<p>If we have included images, the file size increases considerably
because they are embedded in xml (not referenced).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">file.size</span>(file)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; [1] 217255</span></span></code></pre></div>
<p>The definition file for a single question is shown below.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">&quot;1.0&quot;</span><span class="ot"> encoding=</span><span class="st">&quot;UTF-8&quot;</span><span class="fu">?&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>&lt;<span class="kw">quiz</span>&gt;</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  &lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">&quot;category&quot;</span>&gt;</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>    &lt;<span class="kw">category</span>&gt; &lt;<span class="kw">text</span>&gt;$course$/top/Initial test&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">category</span>&gt;</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>    &lt;<span class="kw">info</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">info</span>&gt;</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>    &lt;<span class="kw">idnumber</span>&gt;&lt;/<span class="kw">idnumber</span>&gt;</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>  &lt;/<span class="kw">question</span>&gt;</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>  &lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">&quot;multichoice&quot;</span>&gt;</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>&lt;<span class="kw">name</span>&gt; &lt;<span class="kw">text</span>&gt;q_001_multichoice_what_are_the_basic_arithmetic_operations&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">name</span>&gt;</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>&lt;<span class="kw">questiontext</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt;</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>  &lt;<span class="kw">text</span>&gt;<span class="bn">&lt;![CDATA[</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>     &lt;!-- Copyright © 2024 Universidad de Granada --&gt;</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>     &lt;!-- License Creative Commons Attribution-ShareAlike 4.0 --&gt;</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>     &lt;p&gt;What are the basic arithmetic operations?&lt;/p&gt;<span class="bn">]]&gt;</span>&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>     </span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a>&lt;/<span class="kw">questiontext</span>&gt;</span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>&lt;<span class="kw">generalfeedback</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">generalfeedback</span>&gt;</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a>&lt;<span class="kw">defaultgrade</span>&gt;1.0000000&lt;/<span class="kw">defaultgrade</span>&gt;</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>&lt;<span class="kw">penalty</span>&gt;0.5&lt;/<span class="kw">penalty</span>&gt;</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>&lt;<span class="kw">hidden</span>&gt;0&lt;/<span class="kw">hidden</span>&gt;</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a>&lt;<span class="kw">idnumber</span>&gt;&lt;/<span class="kw">idnumber</span>&gt;</span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>&lt;<span class="kw">single</span>&gt;true&lt;/<span class="kw">single</span>&gt;</span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>&lt;<span class="kw">shuffleanswers</span>&gt;true&lt;/<span class="kw">shuffleanswers</span>&gt;</span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>&lt;<span class="kw">answernumbering</span>&gt;abc&lt;/<span class="kw">answernumbering</span>&gt;</span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a>&lt;<span class="kw">showstandardinstruction</span>&gt;0&lt;/<span class="kw">showstandardinstruction</span>&gt;</span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a>&lt;<span class="kw">correctfeedback</span><span class="ot"> format=</span><span class="st">&quot;moodle_auto_format&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;Correct.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">correctfeedback</span>&gt;</span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a>&lt;<span class="kw">partiallycorrectfeedback</span><span class="ot"> format=</span><span class="st">&quot;moodle_auto_format&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">partiallycorrectfeedback</span>&gt;</span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a>&lt;<span class="kw">incorrectfeedback</span><span class="ot"> format=</span><span class="st">&quot;moodle_auto_format&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;Incorrect.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">incorrectfeedback</span>&gt;</span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a>&lt;<span class="kw">answer</span><span class="ot"> fraction=</span><span class="st">&quot;100&quot;</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt;</span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a>   &lt;<span class="kw">text</span>&gt;Addition, subtraction, multiplication and division.&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a>   &lt;<span class="kw">feedback</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;Correct.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">feedback</span>&gt;</span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a>&lt;/<span class="kw">answer</span>&gt;</span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a>&lt;<span class="kw">answer</span><span class="ot"> fraction=</span><span class="st">&quot;-50.000000000000000&quot;</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt;</span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a>   &lt;<span class="kw">text</span>&gt;Addition and subtraction.&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a>   &lt;<span class="kw">feedback</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;Incorrect.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">feedback</span>&gt;</span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a>&lt;/<span class="kw">answer</span>&gt;</span>
<span id="cb18-37"><a href="#cb18-37" tabindex="-1"></a>&lt;<span class="kw">answer</span><span class="ot"> fraction=</span><span class="st">&quot;-50.000000000000000&quot;</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt;</span>
<span id="cb18-38"><a href="#cb18-38" tabindex="-1"></a>   &lt;<span class="kw">text</span>&gt;Addition, subtraction, multiplication, division and square root.&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb18-39"><a href="#cb18-39" tabindex="-1"></a>   &lt;<span class="kw">feedback</span><span class="ot"> format=</span><span class="st">&quot;html&quot;</span>&gt; &lt;<span class="kw">text</span>&gt;Incorrect.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">feedback</span>&gt;</span>
<span id="cb18-40"><a href="#cb18-40" tabindex="-1"></a>&lt;/<span class="kw">answer</span>&gt;</span>
<span id="cb18-41"><a href="#cb18-41" tabindex="-1"></a>&lt;/<span class="kw">question</span>&gt;</span>
<span id="cb18-42"><a href="#cb18-42" tabindex="-1"></a>&lt;/<span class="kw">quiz</span>&gt;</span></code></pre></div>
</div>
</div>
<div id="kind-of-questions" class="section level1">
<h1>Kind of questions</h1>
<p>We have simplified and generalized the definition process for 9 types
of questions, so that we do not even have to indicate the type to define
them, it is deduced from the definition: It depends on the value of the
<code>answer</code> field. In some cases a character in the
<code>type</code> field is used to distinguish between two types whose
definition is identical or to indicate the orientation of the answers
(horizontal or vertical), as we will see below. We dedicate a section to
each type with the names that are generated in the xml file.</p>
<div id="essay" class="section level2">
<h2><code>essay</code></h2>
<p>Only includes the question statement with or without an image (the
<code>answer</code> field is empty). The answer to the question is made
through free text. Below is an example that we had shown before.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;Describe the addition operation.&#39;</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="truefalse" class="section level2">
<h2><code>truefalse</code></h2>
<p>The <code>answer</code> field contains the correct answer. If this is
one of the literals corresponding to the boolean values
(<code>&#39;True&#39;</code> or <code>&#39;False&#39;</code>), nothing else needs to be
indicated. Here is an example.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;The square root is a basic arithmetic operation.&#39;</span>,</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;False&#39;</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="numerical" class="section level2">
<h2><code>numerical</code></h2>
<p>If the value of field <code>answer</code> is a number with or without
decimal places, or a vector of two numbers, it is a
<code>numerical</code> question.</p>
<p>In this type of questions we only have to indicate correct values of
the answer. If, instead of a value, we indicate a vector of two values,
the second number represents the margin of error in which the answer is
accepted as valid. Below are two examples.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;What is the result of SQRT(4)?&#39;</span>,</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;2&#39;</span>,</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="st">&#39;-2&#39;</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;What is the result of 4/3?&#39;</span>,</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>    <span class="at">answer =</span> <span class="fu">c</span>(<span class="st">&#39;1.33&#39;</span>, <span class="st">&#39;0.03&#39;</span>)</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="shortanswer" class="section level2">
<h2><code>shortanswer</code></h2>
<p>If only field <code>answer</code> is defined and it is not a boolean
or numeric value, it is of type <code>shortanswer</code>, for
example:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;What basic operation does it have as a + symbol?&#39;</span>,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;Addition&#39;</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="multichoice" class="section level2">
<h2><code>multichoice</code></h2>
<p>If field <code>answer</code> and the rest of the answers are of type
string, it is of type <code>multichoice</code>. The content of field
<code>answer</code> is the correct answer. Here is an example.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;What are the basic arithmetic operations?&#39;</span>,</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;Addition, subtraction, multiplication and division.&#39;</span>,</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="st">&#39;Addition and subtraction.&#39;</span>,</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>    <span class="at">a_2 =</span> <span class="st">&#39;Addition, subtraction, multiplication, division and square root.&#39;</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="ordering" class="section level2">
<h2><code>ordering</code></h2>
<p>Type <code>ordering</code> is defined as type
<code>multichoice</code>. To distinguish it, we assign the parameter
<code>type</code> a value other than empty, which is its default value.
If we assign the value <code>h</code>, the answers will be presented
horizontally, if it is different from <code>h</code>, they will be
presented vertically.</p>
<p>In the example below, the two questions are the same, only the way
the answers are presented changes.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&#39;h&#39;</span>,</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;Order the result from smallest to largest.&#39;</span>,</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;6/2&#39;</span>,</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="st">&#39;6-2&#39;</span>,</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>    <span class="at">a_2 =</span> <span class="st">&#39;6+2&#39;</span>,</span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a>    <span class="at">a_3 =</span> <span class="st">&#39;6*2&#39;</span></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&#39;x&#39;</span>,</span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;Order the result from smallest to largest.&#39;</span>,</span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;6/2&#39;</span>,</span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="st">&#39;6-2&#39;</span>,</span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a>    <span class="at">a_2 =</span> <span class="st">&#39;6+2&#39;</span>,</span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a>    <span class="at">a_3 =</span> <span class="st">&#39;6*2&#39;</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a>  ) </span></code></pre></div>
</div>
<div id="ddwtos-and-gapselect" class="section level2">
<h2><code>ddwtos</code> and <code>gapselect</code></h2>
<p>In questions of these types the objective is to fill in the gaps with
the terms indicated. If the variable <code>type</code> has the default
value (empty string), the values are filled by dragging and dropping. If
we define a value other than empty in the variable <code>type</code>,
they are filled by selecting from a list.</p>
<p>Gaps in the statement are defined by numbers in double brackets, as
shown in the following examples.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;The symbol for addition is [[1]], the symbol for subtraction is [[2]].&#39;</span>,</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;+&#39;</span>,</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="st">&#39;-&#39;</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&#39;x&#39;</span>,</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;The symbol for addition is [[1]], the symbol for subtraction is [[2]].&#39;</span>,</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>    <span class="at">answer =</span> <span class="st">&#39;+&#39;</span>,</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="st">&#39;-&#39;</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a>  )</span></code></pre></div>
<p>We have to indicate as many answers as gaps, in the correct
order.</p>
</div>
<div id="matching" class="section level2">
<h2><code>matching</code></h2>
<p>If the answers are made up of vectors of pairs of strings, we are in
a type <code>matching</code> question. Below we show an example.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>qc <span class="ot">&lt;-</span> qc <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>  <span class="fu">define_question</span>(</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>    <span class="at">question =</span> <span class="st">&#39;Match each operation with its symbol.&#39;</span>,</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>    <span class="at">answer =</span> <span class="fu">c</span>(<span class="st">&#39;Addition&#39;</span>, <span class="st">&#39;+&#39;</span>),</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>    <span class="at">a_1 =</span> <span class="fu">c</span>(<span class="st">&#39;Subtraction&#39;</span>, <span class="st">&#39;-&#39;</span>),</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>    <span class="at">a_2 =</span> <span class="fu">c</span>(<span class="st">&#39;Multiplication&#39;</span>, <span class="st">&#39;*&#39;</span>)</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
<div id="conclusions" class="section level1">
<h1>Conclusions</h1>
<p>The <code>moodef</code> package makes it easy to define questions for
<em>Moodle</em> quizzes.</p>
<p>We can define the questions one by one by calling a function or in
bulk using a csv file or a data frame. We have simplified and
generalized the definition so that the types considered are defined with
the same parameters.</p>
<p>The functionality offered by the package can be used to manually
define the questions quickly or to define them automatically or
semi-automatically from R.</p>
<p>The result of the definition process is an xml file that can be
imported directly into the <em>Moodle</em> question bank.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
